{"version":3,"sources":["../../tempCollect/components/navigationTimeline.js"],"names":["navigationTimelineComponent","init","startTime","data","perfTiming","navigationStart","perfTimingCalc","loadEventEnd","perfProp","output","push","sort","a","b","blocks","waterfall","timeBlock","pageLoadTime","unloadEventStart","unloadEventEnd","performance","navigation","redirectCount","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domComplete","domContentLoadedEventStart","domContentLoadedEventEnd","loadEventStart","secureConnectionStart","msFirstPaint","domInteractive","measures","forEach","measure","name","Math","round","duration","tableLogger","logTables","columns","marks","setupTimeLine"],"mappings":"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","sourcesContent":["/*\r\nLogic for Naviagtion Timing API and Markers Waterfall\r\n*/\r\n\r\nimport data from \"../data\";\r\nimport tableLogger from \"../helpers/tableLogger\";\r\nimport waterfall from \"../helpers/waterfall\";\r\n\r\nconst navigationTimelineComponent = {};\r\n\r\nnavigationTimelineComponent.init = () => {\r\n\r\n\tconst startTime = data.perfTiming.navigationStart;\r\n\tconst perfTimingCalc = {\r\n\t\t\t\"pageLoadTime\" : data.perfTiming.loadEventEnd - data.perfTiming.navigationStart,\r\n\t\t\t\"output\" : []\r\n\t\t};\r\n\r\n\tfor(let perfProp in data.perfTiming) {\r\n\t\tif(data.perfTiming[perfProp] && typeof data.perfTiming[perfProp] === \"number\"){\r\n\t\t\tperfTimingCalc[perfProp] = data.perfTiming[perfProp] - startTime;\r\n\t\t\tperfTimingCalc.output.push({\r\n\t\t\t\t\"name\" : perfProp,\r\n\t\t\t\t\"time (ms)\" : data.perfTiming[perfProp] - startTime\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tperfTimingCalc.output.sort((a, b) => (a[\"time (ms)\"]||0) - (b[\"time (ms)\"]||0));\r\n\r\n\tperfTimingCalc.blocks = [\r\n\t\twaterfall.timeBlock(\"Total\", 0, perfTimingCalc.pageLoadTime, \"block-total\"),\r\n\t\twaterfall.timeBlock(\"Unload\", perfTimingCalc.unloadEventStart, perfTimingCalc.unloadEventEnd, \"block-unload\"),\r\n\t\twaterfall.timeBlock(\"Redirect (\" + performance.navigation.redirectCount + \"x)\", perfTimingCalc.redirectStart, perfTimingCalc.redirectEnd, \"block-redirect\"),\r\n\t\twaterfall.timeBlock(\"App cache\", perfTimingCalc.fetchStart, perfTimingCalc.domainLookupStart, \"block-appcache\"),\r\n\t\twaterfall.timeBlock(\"DNS\", perfTimingCalc.domainLookupStart, perfTimingCalc.domainLookupEnd, \"block-dns\"),\r\n\t\twaterfall.timeBlock(\"TCP\", perfTimingCalc.connectStart, perfTimingCalc.connectEnd, \"block-tcp\"),\r\n\t\twaterfall.timeBlock(\"Time to First Byte\", perfTimingCalc.requestStart, perfTimingCalc.responseStart, \"block-ttfb\"),\r\n\t\twaterfall.timeBlock(\"Response\", perfTimingCalc.responseStart, perfTimingCalc.responseEnd, \"block-response\"),\r\n\t\twaterfall.timeBlock(\"DOM Processing\", perfTimingCalc.domLoading, perfTimingCalc.domComplete, \"block-dom\"),\r\n\t\twaterfall.timeBlock(\"domContentLoaded Event\", perfTimingCalc.domContentLoadedEventStart, perfTimingCalc.domContentLoadedEventEnd, \"block-dom-content-loaded\"),\r\n\t\twaterfall.timeBlock(\"onload Event\", perfTimingCalc.loadEventStart, perfTimingCalc.loadEventEnd, \"block-onload\")\r\n\t];\r\n\r\n\tif(perfTimingCalc.secureConnectionStart){\r\n\t\tperfTimingCalc.blocks.push(waterfall.timeBlock(\"SSL\", perfTimingCalc.secureConnectionStart, perfTimingCalc.connectEnd, \"block-ssl\"));\r\n\t}\r\n\tif(perfTimingCalc.msFirstPaint){\r\n\t\tperfTimingCalc.blocks.push(waterfall.timeBlock(\"msFirstPaint Event\", perfTimingCalc.msFirstPaint, perfTimingCalc.msFirstPaint, \"block-ms-first-paint-event\"));\r\n\t}\r\n\tif(perfTimingCalc.domInteractive){\r\n\t\tperfTimingCalc.blocks.push(waterfall.timeBlock(\"domInteractive Event\", perfTimingCalc.domInteractive, perfTimingCalc.domInteractive, \"block-dom-interactive-event\"));\r\n\t}\r\n\tif(!perfTimingCalc.redirectEnd && !perfTimingCalc.redirectStart && perfTimingCalc.fetchStart > perfTimingCalc.navigationStart){\r\n\t\tperfTimingCalc.blocks.push(waterfall.timeBlock(\"Cross-Domain Redirect (and/or other Delay)\", perfTimingCalc.navigationStart, perfTimingCalc.fetchStart, \"block-redirect\"));\r\n\t}\r\n\r\n\tperfTimingCalc.blocks.push(waterfall.timeBlock(\"Network/Server\", perfTimingCalc.navigationStart, perfTimingCalc.responseStart, \"block-network-server\"));\r\n\r\n\t//add measures to be added as bars\r\n\tdata.measures.forEach((measure) => {\r\n\t\tperfTimingCalc.blocks.push(waterfall.timeBlock(\"measure:\" + measure.name, Math.round(measure.startTime), Math.round(measure.startTime + measure.duration), \"block-custom-measure\"));\r\n\t});\r\n\r\n\ttableLogger.logTables([\r\n\t\t{name: \"Navigation Timeline\", data : perfTimingCalc.blocks, columns : [\"name\", \"start\", \"end\", \"total\"]},\r\n\t\t{name: \"Navigation Events\", data : perfTimingCalc.output},\r\n\t\t{name: \"Marks\", data : data.marks, columns : [\"name\", \"startTime\", \"duration\"]}\r\n\t]);\r\n\r\n\treturn waterfall.setupTimeLine(Math.round(perfTimingCalc.pageLoadTime), perfTimingCalc.blocks, data.marks, [], \"Navigation Timing\");\r\n};\r\n\r\nexport default navigationTimelineComponent;\r\n"],"file":"navigationTimeline.js"}